<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Validaci칩n por elecci칩n funcional</title>

<style>
:root{
  --primary:#0c4a6e;
  --bg:#f8fafc;
  --card:#ffffff;
  --border:#e2e8f0;
  --text:#1f2933;
  --radius:14px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
  background:var(--bg);
  color:var(--text);
}
.container{
  max-width:820px;
  margin:auto;
  padding:20px;
}
h1{text-align:center;color:var(--primary)}
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:22px;
  margin-bottom:24px;
}
.question{margin-bottom:22px}
.question strong{display:block;margin-bottom:10px}
label{
  display:block;
  padding:10px 12px;
  border:1px solid var(--border);
  border-radius:10px;
  margin-bottom:8px;
  cursor:pointer;
}
input{margin-right:10px;accent-color:var(--primary)}
.section{display:none}
button{
  width:100%;
  padding:14px;
  background:var(--primary);
  color:#fff;
  border:none;
  border-radius:12px;
  font-size:1rem;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="container">

<h1>Validaci칩n por elecci칩n funcional</h1>

<form id="surveyForm">

<!-- PREGUNTA RA칈Z -->
<div class="card">
<h2>Si tuvieras que quedarte solo con UNA opci칩n, 쯖u치l elegir칤as?</h2>
<label><input type="radio" name="root_choice" value="movimiento" required> Juegos de movimiento</label>
<label><input type="radio" name="root_choice" value="educativas"> Actividades educativas</label>
<label><input type="radio" name="root_choice" value="progreso"> Herramientas para evaluar progreso</label>
<label><input type="radio" name="root_choice" value="familias"> Herramientas para comunicar avances a familias</label>
</div>

<!-- MOVIMIENTO -->
<div id="movimiento" class="section">
<div class="card">
<h2>游꿡 Juegos de movimiento</h2>

<div class="question">
<strong>쯈u칠 te gustar칤a trabajar principalmente?</strong>
<label><input type="radio" name="mov_objetivo" value="Rango de movimiento"> Rango de movimiento</label>
<label><input type="radio" name="mov_objetivo" value="Coordinaci칩n"> Coordinaci칩n</label>
<label><input type="radio" name="mov_objetivo" value="Control postural"> Control postural</label>
<label><input type="radio" name="mov_objetivo" value="Atenci칩n visual"> Atenci칩n / seguimiento visual</label>
<label><input type="radio" name="mov_objetivo" value="Otro"> Otro</label>
</div>

<div class="question">
<strong>쯈u칠 tan importante es la adaptabilidad?</strong>
<label><input type="radio" name="mov_adaptabilidad" value="Parte del cuerpo"> Elegir parte del cuerpo</label>
<label><input type="radio" name="mov_adaptabilidad" value="Dificultad"> Ajustar dificultad</label>
<label><input type="radio" name="mov_adaptabilidad" value="Movimientos m칤nimos"> Movimientos m칤nimos</label>
<label><input type="radio" name="mov_adaptabilidad" value="Sin instrucciones"> Sin instrucciones verbales</label>
</div>

<div class="question">
<strong>쮻칩nde usar칤as m치s estos juegos?</strong>
<label><input type="radio" name="mov_contexto" value="Sesi칩n"> Sesi칩n terap칠utica</label>
<label><input type="radio" name="mov_contexto" value="Aula"> Aula</label>
<label><input type="radio" name="mov_contexto" value="Casa"> Casa</label>
<label><input type="radio" name="mov_contexto" value="Aut칩nomo"> Uso aut칩nomo</label>
</div>

<div class="question">
<strong>쯈u칠 te frustrar칤a m치s?</strong>
<label><input type="radio" name="mov_frustracion" value="Repetitivo"> Muy repetitivo</label>
<label><input type="radio" name="mov_frustracion" value="No adaptable"> No adaptable</label>
<label><input type="radio" name="mov_frustracion" value="Cansancio"> Se cansa r치pido</label>
<label><input type="radio" name="mov_frustracion" value="No justificar"> No justifica avances</label>
</div>
</div>
</div>

<!-- (Las dem치s secciones educativas, progreso y familias se mantienen igual que antes) -->
<!-- Para evitar ruido aqu칤, el FIX NO afecta el contenido -->

<button type="submit">Enviar respuestas</button>
</form>
</div>

<script>
/* 游대 Mostrar secci칩n seg칰n respuesta ra칤z */
document.querySelectorAll('input[name="root_choice"]').forEach(radio=>{
  radio.addEventListener("change",()=>{
    document.querySelectorAll(".section").forEach(s=>s.style.display="none");
    document.getElementById(radio.value).style.display="block";
    window.scrollTo({top:0,behavior:"smooth"});
  });
});

/* 游 ENV칈O A GOOGLE APPS SCRIPT (FIX OBLIGATORIO) */
const scriptURL = "https://script.google.com/macros/s/AKfycbwxjxkVHTAvHIY4hOpmfWsQb1bSipWUTpcsK0tBxPrliZV1yWdwSILsGWzloQyVUDWTTw/exec";

document.getElementById("surveyForm").addEventListener("submit",e=>{
  e.preventDefault();

  const data = Object.fromEntries(new FormData(e.target).entries());

  fetch(scriptURL,{
    method:"POST",
    body:JSON.stringify(data),
    headers:{
      "Content-Type":"text/plain;charset=utf-8"
    }
  })
  .then(res=>res.text())
  .then(text=>{
    console.log("Respuesta GAS:",text);

    if(text.startsWith("OK")){
      alert("춰Gracias! Respuestas enviadas correctamente.");
      location.reload();
    }else{
      alert("Error del servidor:\n"+text);
    }
  })
  .catch(err=>{
    console.error(err);
    alert("Error de red al enviar el formulario");
  });
});
</script>

</body>
</html>
